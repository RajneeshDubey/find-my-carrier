{"ast":null,"code":"import { objectWithoutProperties as _objectWithoutProperties, extends as _extends } from '../../../_virtual/_rollupPluginBabelHelpers.js';\nimport { useRef, Children, useState, useEffect, createElement, Fragment, cloneElement } from 'react';\nimport classNames from 'classnames';\nimport { PopoverPortal } from './PopoverPortal.js';\nimport style from './StatefullPopover.module.scss.js';\n\nvar StatefullPopover = props => {\n  var {\n    children,\n    hideDelay = 200,\n    showDelay = 0,\n    onMouseEnter = () => {},\n    onMouseLeave = () => {},\n    trigger = \"click\",\n    onClose = () => {},\n    onOpen = () => {},\n    isOpen,\n    inititalState,\n    containerClassName = \"\"\n  } = props,\n      rest = _objectWithoutProperties(props, [\"children\", \"hideDelay\", \"showDelay\", \"onMouseEnter\", \"onMouseLeave\", \"trigger\", \"onClose\", \"onOpen\", \"isOpen\", \"inititalState\", \"containerClassName\"]);\n\n  var popoverContainerRef = useRef(null);\n  var triggerRef = useRef();\n  var child = Children.only(children);\n  var isControlled = isOpen !== undefined;\n  var [statefullOpen, setStatefefullOpen] = useState(inititalState);\n  var hideTimer = useRef();\n  var showTimer = useRef();\n\n  var handleClose = evt => {\n    statefullOpen && onClose(evt);\n\n    if (!isControlled) {\n      setStatefefullOpen(false);\n    }\n  };\n\n  var handleOpen = evt => {\n    !statefullOpen && onOpen(evt);\n\n    if (!isControlled) {\n      setStatefefullOpen(true);\n    }\n  };\n\n  var isPopoverHover = () => {\n    return trigger === \"hover\";\n  };\n\n  var clearTimers = () => {\n    [hideTimer.current, showTimer.current].forEach(timer => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n    });\n  };\n\n  var handleAnchorMouseEnter = evt => {\n    if (hideTimer.current) {\n      clearTimeout(hideTimer.current);\n    }\n\n    showTimer.current = setTimeout(() => {\n      handleOpen(evt);\n    }, showDelay);\n  };\n\n  var handlePopoverMouseEnter = () => {\n    if (hideTimer.current) {\n      clearTimeout(hideTimer.current);\n    }\n  };\n\n  var handleAnchorMouseLeave = evt => {\n    /* istanbul ignore else */\n    if (showTimer.current) {\n      clearTimeout(showTimer.current);\n    }\n\n    hideTimer.current = setTimeout(() => {\n      handleClose(evt);\n    }, hideDelay);\n  };\n\n  var handlePopoverMouseLeave = evt => {\n    /* istanbul ignore else */\n    if (showTimer.current) {\n      clearTimeout(showTimer.current);\n    }\n\n    hideTimer.current = setTimeout(() => {\n      handleClose(evt);\n    }, hideDelay);\n  };\n\n  var handleAnchorClick = evt => {\n    if (statefullOpen) {\n      handleClose(evt);\n    } else {\n      handleOpen(evt);\n    }\n  };\n\n  var getContainerEventHandlers = () => {\n    if (isPopoverHover()) {\n      return {\n        onMouseEnter: evt => {\n          handleAnchorMouseEnter(evt);\n        },\n        onMouseLeave: evt => {\n          handleAnchorMouseLeave(evt);\n        }\n      };\n    } else {\n      return {\n        onClick: evt => {\n          handleAnchorClick(evt);\n        }\n      };\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      clearTimers();\n    };\n  }, []);\n  useEffect(() => {\n    if (!isControlled) {\n      return;\n    }\n\n    setStatefefullOpen(isOpen);\n  }, [isOpen]);\n  return /*#__PURE__*/createElement(Fragment, null, /*#__PURE__*/createElement(\"span\", _extends({\n    className: classNames(style.popoverContainer, containerClassName),\n    ref: popoverContainerRef\n  }, getContainerEventHandlers()), /*#__PURE__*/cloneElement(child, {\n    \"aria-expanded\": statefullOpen,\n    \"aria-haspopup\": true,\n    ref: node => {\n      var {\n        ref\n      } = child; // @see {@link https://github.com/facebook/react/issues/8873#issuecomment-489579878}\n\n      if (typeof ref === \"function\") {\n        ref(node);\n      } else if (ref != null) {\n        ref.current = node;\n      }\n\n      triggerRef.current = node;\n    }\n  })), statefullOpen && /*#__PURE__*/createElement(PopoverPortal, _extends({}, rest, {\n    popoverContainerRef: popoverContainerRef,\n    triggerRef: triggerRef,\n    onMouseEnter: evt => {\n      /* istanbul ignore else */\n      if (isPopoverHover()) {\n        handlePopoverMouseEnter();\n      }\n\n      onMouseEnter(evt);\n    },\n    onMouseLeave: evt => {\n      /* istanbul ignore else */\n      if (isPopoverHover()) {\n        handlePopoverMouseLeave(evt);\n      }\n\n      onMouseLeave(evt);\n    },\n    onClose: evt => {\n      handleClose(evt);\n    }\n  })));\n};\n\nexport { StatefullPopover };","map":{"version":3,"names":["objectWithoutProperties","_objectWithoutProperties","extends","_extends","useRef","Children","useState","useEffect","createElement","Fragment","cloneElement","classNames","PopoverPortal","style","StatefullPopover","props","children","hideDelay","showDelay","onMouseEnter","onMouseLeave","trigger","onClose","onOpen","isOpen","inititalState","containerClassName","rest","popoverContainerRef","triggerRef","child","only","isControlled","undefined","statefullOpen","setStatefefullOpen","hideTimer","showTimer","handleClose","evt","handleOpen","isPopoverHover","clearTimers","current","forEach","timer","clearTimeout","handleAnchorMouseEnter","setTimeout","handlePopoverMouseEnter","handleAnchorMouseLeave","handlePopoverMouseLeave","handleAnchorClick","getContainerEventHandlers","onClick","className","popoverContainer","ref","node"],"sources":["/Users/r0d025j/Documents/IMD/GT22/find-my-carrier/carrier-prediction-ui/node_modules/@seller-center/core-components/dist/esm/components/src/Popover/StatefullPopover.js"],"sourcesContent":["import { objectWithoutProperties as _objectWithoutProperties, extends as _extends } from '../../../_virtual/_rollupPluginBabelHelpers.js';\nimport { useRef, Children, useState, useEffect, createElement, Fragment, cloneElement } from 'react';\nimport classNames from 'classnames';\nimport { PopoverPortal } from './PopoverPortal.js';\nimport style from './StatefullPopover.module.scss.js';\n\nvar StatefullPopover = props => {\n  var {\n    children,\n    hideDelay = 200,\n    showDelay = 0,\n    onMouseEnter = () => {},\n    onMouseLeave = () => {},\n    trigger = \"click\",\n    onClose = () => {},\n    onOpen = () => {},\n    isOpen,\n    inititalState,\n    containerClassName = \"\"\n  } = props,\n      rest = _objectWithoutProperties(props, [\"children\", \"hideDelay\", \"showDelay\", \"onMouseEnter\", \"onMouseLeave\", \"trigger\", \"onClose\", \"onOpen\", \"isOpen\", \"inititalState\", \"containerClassName\"]);\n\n  var popoverContainerRef = useRef(null);\n  var triggerRef = useRef();\n  var child = Children.only(children);\n  var isControlled = isOpen !== undefined;\n  var [statefullOpen, setStatefefullOpen] = useState(inititalState);\n  var hideTimer = useRef();\n  var showTimer = useRef();\n\n  var handleClose = evt => {\n    statefullOpen && onClose(evt);\n\n    if (!isControlled) {\n      setStatefefullOpen(false);\n    }\n  };\n\n  var handleOpen = evt => {\n    !statefullOpen && onOpen(evt);\n\n    if (!isControlled) {\n      setStatefefullOpen(true);\n    }\n  };\n\n  var isPopoverHover = () => {\n    return trigger === \"hover\";\n  };\n\n  var clearTimers = () => {\n    [hideTimer.current, showTimer.current].forEach(timer => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n    });\n  };\n\n  var handleAnchorMouseEnter = evt => {\n    if (hideTimer.current) {\n      clearTimeout(hideTimer.current);\n    }\n\n    showTimer.current = setTimeout(() => {\n      handleOpen(evt);\n    }, showDelay);\n  };\n\n  var handlePopoverMouseEnter = () => {\n    if (hideTimer.current) {\n      clearTimeout(hideTimer.current);\n    }\n  };\n\n  var handleAnchorMouseLeave = evt => {\n    /* istanbul ignore else */\n    if (showTimer.current) {\n      clearTimeout(showTimer.current);\n    }\n\n    hideTimer.current = setTimeout(() => {\n      handleClose(evt);\n    }, hideDelay);\n  };\n\n  var handlePopoverMouseLeave = evt => {\n    /* istanbul ignore else */\n    if (showTimer.current) {\n      clearTimeout(showTimer.current);\n    }\n\n    hideTimer.current = setTimeout(() => {\n      handleClose(evt);\n    }, hideDelay);\n  };\n\n  var handleAnchorClick = evt => {\n    if (statefullOpen) {\n      handleClose(evt);\n    } else {\n      handleOpen(evt);\n    }\n  };\n\n  var getContainerEventHandlers = () => {\n    if (isPopoverHover()) {\n      return {\n        onMouseEnter: evt => {\n          handleAnchorMouseEnter(evt);\n        },\n        onMouseLeave: evt => {\n          handleAnchorMouseLeave(evt);\n        }\n      };\n    } else {\n      return {\n        onClick: evt => {\n          handleAnchorClick(evt);\n        }\n      };\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      clearTimers();\n    };\n  }, []);\n  useEffect(() => {\n    if (!isControlled) {\n      return;\n    }\n\n    setStatefefullOpen(isOpen);\n  }, [isOpen]);\n  return /*#__PURE__*/createElement(Fragment, null, /*#__PURE__*/createElement(\"span\", _extends({\n    className: classNames(style.popoverContainer, containerClassName),\n    ref: popoverContainerRef\n  }, getContainerEventHandlers()), /*#__PURE__*/cloneElement(child, {\n    \"aria-expanded\": statefullOpen,\n    \"aria-haspopup\": true,\n    ref: node => {\n      var {\n        ref\n      } = child; // @see {@link https://github.com/facebook/react/issues/8873#issuecomment-489579878}\n\n      if (typeof ref === \"function\") {\n        ref(node);\n      } else if (ref != null) {\n        ref.current = node;\n      }\n\n      triggerRef.current = node;\n    }\n  })), statefullOpen && /*#__PURE__*/createElement(PopoverPortal, _extends({}, rest, {\n    popoverContainerRef: popoverContainerRef,\n    triggerRef: triggerRef,\n    onMouseEnter: evt => {\n      /* istanbul ignore else */\n      if (isPopoverHover()) {\n        handlePopoverMouseEnter();\n      }\n\n      onMouseEnter(evt);\n    },\n    onMouseLeave: evt => {\n      /* istanbul ignore else */\n      if (isPopoverHover()) {\n        handlePopoverMouseLeave(evt);\n      }\n\n      onMouseLeave(evt);\n    },\n    onClose: evt => {\n      handleClose(evt);\n    }\n  })));\n};\n\nexport { StatefullPopover };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}